<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Golang Mutex Usage</title>
</head>
<body>
  <h1>Golang Mutex Usage</h1>
  <p>Date: 2024-12-23 22:00:00 +0300</p>

  <p>Date: 2024-12-23 22:00:00 +0300</p>

  <article>
    <h2>Goroutine and Mutex Usage</h2>

    <h3>Without Mutex</h3>
    <pre><code>package main

import (
	"fmt"
	"sync"
)

func main() {
	var counter int
	var wg sync.WaitGroup

	for i := 0; i &lt; 50000; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			counter++
		}()
	}

	wg.Wait()
	fmt.Println("Son Sayaç Değeri:", counter)
}</code></pre>

    <h4>Output</h4>
    <p>It gives different output for each run.</p>
    <p>First Run: 48993<br>
    Second Run: 48780<br>
    Third Run: 48858</p>

    <h3>With Mutex</h3>
    <pre><code>package main

import (
	"fmt"
	"sync"
)

func main() {
	var counter int
	var mu sync.Mutex // Define Mutex
	var wg sync.WaitGroup

	for i := 0; i &lt; 50000; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			mu.Lock() // Locks
			counter++
			mu.Unlock() // Unlocks
		}()
	}

	wg.Wait()
	fmt.Println("Son Sayaç Değeri:", counter)
}</code></pre>

    <h4>Output</h4>
    <p>It gives same output for each run.<br>
    Output: 50000</p>

    <h3>Notes</h3>
    <ul>
      <li>Mutex only protects a specific block of code or variables:
        <ul>
          <li>If you are working with multiple variables and want to protect them, the same mutex should be used in all code blocks accessing those variables.</li>
        </ul>
      </li>
      <li>Not all variables are locked, only the code block protected by the mutex is:
        <ul>
          <li><code>mu.Lock()</code> makes only the code or variable protected by <code>mu</code> thread-safe.</li>
        </ul>
      </li>
    </ul>
  </article>

  <p>
    <a href="/blogs/index.html">Back to blog index</a> |
    <a href="/index.html">Back to CV</a>
  </p>
</body>
</html>

